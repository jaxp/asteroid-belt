FROM java:8
MAINTAINER Jax "jax94@qq.com"
ENV REFRESHED_AT 2020-11-19

EXPOSE 8070
ENV consul="127.0.0.1"
ENV consul_token=""
ARG PROJECT_NAME
ENV HOME_PATH /home
WORKDIR $HOME_PATH
ADD target/$PROJECT_NAME.zip $HOME_PATH/$PROJECT_NAME.zip
RUN unzip $PROJECT_NAME.zip

WORKDIR $HOME_PATH/$PROJECT_NAME
VOLUME ["$HOME_PATH/$PROJECT_NAME"]
ENTRYPOINT ["./bin/start.sh", "token", "$consul", "$consul_token"]